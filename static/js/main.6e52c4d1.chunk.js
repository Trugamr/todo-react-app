(this["webpackJsonptodo-react-app"]=this["webpackJsonptodo-react-app"]||[]).push([[0],{161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},167:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(31),o=a.n(i),c=a(21),s=(a(81),a(16)),l=a.n(s),d=a(20),u=a(27),p=a(6),m=a(7),f=a(5),h=a(8),b=a(9),g=(a(83),a(64)),E=a(30);a(84);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var x=r.a.createElement("title",null,"pencil"),O=r.a.createElement("g",{id:"pencil"},r.a.createElement("polygon",{points:"10.01 43.01 2 46 4.98 37.99 5 38 10 43 10.01 43.01",fill:"#2d346a"}),r.a.createElement("polygon",{points:"14.37 33.63 20.02 39.28 10.01 43.01 10 43 5 38 4.98 37.99 8.72 27.97 14.37 33.63",fill:"#fff"}),r.a.createElement("path",{d:"M41.11,18.19,20,39.28l-5.65-5.65L39,9l5.6,5.6a5.32,5.32,0,0,1-.59.68L41.12,18.2Z",fill:"#ffc12e"}),r.a.createElement("path",{d:"M29.81,6.89,32.74,4a5.4,5.4,0,0,1,.69-.59L39,9,14.37,33.63,8.72,28Z",fill:"#ffc12e"}),r.a.createElement("path",{d:"M46,10.41a6.84,6.84,0,0,1-1.36,4.16L39,9,33.43,3.36c2.85-2.16,7.17-1.72,10,1.16A8.39,8.39,0,0,1,46,10.41Z",fill:"#c3cce9"}),r.a.createElement("polyline",{points:"41.43 17.86 20.02 39.28 8.72 27.97 30.14 6.57",fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("path",{d:"M29.81,6.89,32.74,4c2.81-2.81,7.62-2.55,10.74.57h0c3.12,3.12,3.38,7.93.57,10.73L41.12,18.2",fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("polyline",{points:"20.02 39.28 2 46 8.72 27.97",fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("line",{x1:5,y1:38,x2:10,y2:43,fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("line",{x1:33.43,y1:3.36,x2:44.68,y2:14.61,fill:"none",stroke:"#2d346a",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("line",{x1:14.37,y1:33.63,x2:39.04,y2:8.97,fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),k=function(e){var t=e.svgRef,a=e.title,n=y(e,["svgRef","title"]);return r.a.createElement("svg",v({id:"icons",viewBox:"0 0 48 48",ref:t},n),void 0===a?x:a?r.a.createElement("title",null,a):null,O)},j=r.a.forwardRef((function(e,t){return r.a.createElement(k,v({svgRef:t},e))})),w=(a.p,a(180)),S=a(182),L=a(67),C=a(187),R=a(12),U=a(186),A=a(45),N=(a(85),function(e){var t=e.name,a=e.imageURL,n=Object(R.a)(e,["name","imageURL"]);return r.a.createElement(w.a,Object.assign({display:"flex",marginRight:8,marginLeft:8,alignItems:"center"},n),r.a.createElement(U.a,{src:a,name:t,size:32,marginRight:8}),r.a.createElement(A.a,{size:500},t))}),D=a(36),T=a.n(D);a(154),a(156);T.a.initializeApp({apiKey:"AIzaSyCkjxIEEQshEbM3GNrG5LMH2dqtuEgFLsM",authDomain:"todo-react-app-1c2b9.firebaseapp.com",databaseURL:"https://todo-react-app-1c2b9.firebaseio.com",projectId:"todo-react-app-1c2b9",storageBucket:"todo-react-app-1c2b9.appspot.com",messagingSenderId:"494569883453",appId:"1:494569883453:web:0bd3c0a828e36e45296754",measurementId:"G-FXZW0XVN8D"});var I=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=z.doc("/users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,i=t.email,o=t.photoURL,c=new Date,e.prev=9,e.next=12,n.set(Object(d.a)({displayName:r,email:i,photoURL:o,createdAt:c},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("error creating user: ".concat(e.t0.message));case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),_=T.a.auth(),z=T.a.firestore(),B=new T.a.auth.GoogleAuthProvider;B.setCustomParameters({prompt:"select_account"});var M=function(){return _.signInWithPopup(B)},W=(T.a,a(44)),P=Object(W.a)([function(e){return e.user}],(function(e){return e.currentUser})),X=a(15),F={hidden:{opacity:0,y:-50},show:{opacity:1,y:0}},G={hidden:{opacity:0,x:100},show:{opacity:1,x:0}},Z={type:"spring",damping:10,stiffness:50},q={type:"spring",damping:25,stiffness:300},H=Object(c.b)((function(e){return{currentUser:P(e)}}))((function(e){var t=e.currentUser;return r.a.createElement("div",{className:"header-container"},r.a.createElement(X.b.div,{initial:"hidden",animate:"show",transition:Z,variants:F},r.a.createElement(w.a,{className:"header",display:"flex",padding:16,borderRadius:3,background:"tint2",overflow:"hidden"},r.a.createElement(w.a,{flex:1,display:"flex",alignItems:"center"},r.a.createElement(j,{className:"logo"}),r.a.createElement(S.a,{size:600}," Todo")),r.a.createElement(w.a,{display:"flex"},r.a.createElement(X.a,{exitBeforeEnter:!0,initial:!1},t?r.a.createElement(X.b.div,{initial:"hidden",animate:"show",exit:"hidden",variants:G,transition:q,key:"forAnimationPresence1"},r.a.createElement(w.a,{display:"flex"},r.a.createElement(N,{name:t.displayName,imageURL:t.photoURL}),r.a.createElement(L.a,{onClick:function(){return _.signOut()},appearance:"minimal",paddingX:8},r.a.createElement(C.a,{icon:"log-out",color:"muted"})))):r.a.createElement(X.b.div,{initial:"hidden",animate:"show",exit:"hidden",transition:q,variants:G,key:"forAnimationPresence2"},r.a.createElement(L.a,{onClick:M,appearance:"primary"},r.a.createElement("span",null,"Sign In"),r.a.createElement(C.a,{icon:"log-in",marginLeft:10}))))))))})),J=(a(161),a(2)),K=(a(162),a(183)),Q=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",createdAt:null,disabled:!1},a.handleChange=function(e){a.setState(Object(J.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({disabled:!0}),n=a.props.currentUser,e.prev=3,e.next=6,z.collection("/users/".concat(n.id,"/todos"));case 6:return r=e.sent,e.next=9,r.add({text:a.state.text,createdAt:new Date,starred:!1,completed:!1});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("couldn't save todo ".concat(e.t0.message));case 14:a.setState({text:"",disabled:!1});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return r.a.createElement("form",{className:"todo-form",onSubmit:this.handleSubmit},r.a.createElement(w.a,{display:"flex",margin:20,borderRadius:3,alignItems:"center",className:"todo-item",height:50},r.a.createElement(w.a,{flex:1,alignItems:"center",display:"flex",width:20,height:"100%"},r.a.createElement(K.a,{className:"text-input",name:"text",onChange:this.handleChange,placeholder:"Enter a new task",width:"100%",size:500,height:"100%",paddingX:12,required:!0,value:this.state.text,disabled:!e||this.state.disabled})),r.a.createElement(w.a,{height:"100%"},r.a.createElement(L.a,{className:"add-button",appearance:"minimal",height:"100%",paddingX:20,disabled:!e||this.state.disabled},r.a.createElement(A.a,{size:400},"Add")))))}}]),t}(r.a.Component),V=Object(c.b)((function(e){return{currentUser:P(e)}}))(Q),Y=a(35),$=(a(163),a(164),a(185)),ee=a(184),te=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",starred:!1,completed:!1,isShown:!1,isLoading:!1,isShownDel:!1},a.handleCompleted=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.currentUser,e.prev=1,r=!a.state.completed,e.next=5,z.doc("/users/".concat(n.id,"/todos/").concat(t)).update({completed:r});case 5:a.setState({completed:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to set todo as completed: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handleStarred=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.currentUser,e.prev=1,r=!a.state.starred,e.next=5,z.doc("/users/".concat(n.id,"/todos/").concat(t)).update({starred:r});case 5:a.setState({starred:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to set todo as starred: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.currentUser,n&&n(),e.prev=2,e.next=5,z.doc("/users/".concat(r.id,"/todos/").concat(t)).delete();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("failed to delete todo: ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),a.handleChange=function(e){a.setState(Object(J.a)({},e.target.name,e.target.value))},a.handleDialogConfirm=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),r=a.props.currentUser,e.prev=2,e.next=5,z.doc("/users/".concat(r.id,"/todos/").concat(t)).update({text:a.state.text});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("failed to edit todo : ".concat(e.t0.message));case 10:n();case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.text,a=e.starred,n=e.completed;this.setState({text:t,starred:a,completed:n})}},{key:"render",value:function(){var e=this,t=this.props,a=t.todoId,n=t.index,i=t.text,o=t.starred,c=t.completed;return r.a.createElement(w.a,{display:"flex",padding:6,borderRadius:3,alignItems:"center",className:"todo-item"},r.a.createElement(w.a,{flex:1,alignItems:"center",display:"flex",width:20,marginRight:6},r.a.createElement(A.a,{size:500,marginX:4},"".concat(n,".")),r.a.createElement(A.a,{size:500,marginX:4,overflow:"hidden",className:"todo-text ".concat(c?"strike-text":""),onClick:function(){return e.handleCompleted(a)},"data-completed":c},i)),r.a.createElement(w.a,null,r.a.createElement(X.b.div,{className:"motion-button",whileTap:{scale:.9}},r.a.createElement(L.a,{appearance:"minimal",marginRight:4,onClick:function(){return e.setState({isShown:!0})},padding:8},r.a.createElement(C.a,{icon:"edit",color:"selected"}))),r.a.createElement(X.b.div,{className:"motion-button",whileTap:{scale:.9}},r.a.createElement(L.a,{appearance:"minimal",marginRight:4,padding:8,onClick:function(){return e.handleStarred(a)}},r.a.createElement(C.a,{icon:"star",color:"".concat(o?"#F7D154":"muted")}))),r.a.createElement(X.b.div,{className:"motion-button",whileTap:{scale:.9}},r.a.createElement(L.a,{appearance:"minimal",padding:8,onClick:function(){return e.setState({isShownDel:!0})}},r.a.createElement(C.a,{icon:"cross",color:"danger"})))),r.a.createElement($.a,{isShown:this.state.isShown,title:"Edit todo",onCloseComplete:function(){return e.setState({isShown:!1,isLoading:!1})},confirmLabel:this.state.isLoading?"Saving...":"Save",isConfirmLoading:this.state.isLoading,onConfirm:function(t){return e.handleDialogConfirm(a,t)},onCancel:function(){return e.setState({isShown:!1})}},r.a.createElement(ee.a,{name:"text",placeholder:"Your todo...",value:this.state.text,onChange:this.handleChange,required:!0})),r.a.createElement($.a,{isShown:this.state.isShownDel,title:"Delete todo",intent:"danger",onCloseComplete:function(){return e.setState({isShownDel:!1,isLoadingDel:!1})},confirmLabel:"Delete",onConfirm:function(t){return e.handleDelete(a,t)},onCancel:function(){return e.setState({isShownDel:!1})}},r.a.createElement(A.a,null,this.state.text)))}}]),t}(r.a.Component),ae=Object(c.b)((function(e){return{currentUser:P(e)}}))(te),ne=Object(W.a)([function(e){return e.todo}],(function(e){return e.todos})),re={hidden:{y:-20,scale:0,opacity:0},show:function(e){return{y:0,scale:1,opacity:1,transition:{delay:.08*e}}},exit:{y:-20,opacity:0,scale:0,transition:{duration:.2}}},ie={type:"spring",damping:20,stiffness:200},oe=Object(c.b)((function(e){return{todos:ne(e)}}))((function(e){var t=e.todos,a=Object(n.useState)(!0),i=Object(Y.a)(a,2),o=i[0],c=i[1],s=t.length;return r.a.createElement(w.a,{display:"flex",flexDirection:"column",borderRadius:3,margin:20,className:"todo-container"},s?r.a.createElement(X.a,null,t.map((function(e,t){var a=e.id,n=e.text,i=e.starred,l=e.completed,d=Object(R.a)(e,["id","text","starred","completed"]);return r.a.createElement(X.b.div,{key:a,custom:o?t+20:1,initial:"hidden",animate:"show",transition:ie,variants:re,positionTransition:!0,exit:"exit",onAnimationComplete:function(){t===s-1&&c(!1)}},r.a.createElement(ae,Object.assign({todoId:a,text:n,index:t+1,starred:i,completed:l},d)))}))):r.a.createElement(w.a,{display:"flex",padding:16,borderRadius:3,alignItems:"center",justifyContent:"center"},r.a.createElement(S.a,{color:"#7B8B9A"},"Empty :(")))})),ce=Object(c.b)((function(e){return{currentUser:P(e)}}))((function(e){var t=e.currentUser,a={hidden:{opacity:0,y:-30},show:{opacity:1,y:0}},n={type:"spring",damping:30,stiffness:200};return r.a.createElement("div",{className:"todo-page"},r.a.createElement(X.a,{exitBeforeEnter:!0},t?null:r.a.createElement(X.b.div,{initial:"hidden",animate:"show",exit:"hidden",key:"forAnimation1",transition:Object(d.a)({},n,{delay:.4}),variants:a},r.a.createElement(w.a,{display:"flex",padding:15,borderRadius:3,background:"tint2",margin:20,alignItems:"center"},r.a.createElement(S.a,{color:"#7B8B9A"},"Sign in and start adding tasks ^_^"))),t?r.a.createElement(X.b.div,{initial:"hidden",animate:"show",exit:"hidden",transition:n,variants:a,key:"forAnimation2"},r.a.createElement(V,null)):null),t?r.a.createElement(oe,null):null)})),se=(a(167),function(){var e=Object(n.useState)(!1),t=Object(Y.a)(e,2),a=t[0],i=t[1],o={stop:{scale:1},animate:{scale:[1,1.1,.9,1],transition:{repeatDelay:1,loop:1/0}}};return r.a.createElement("div",{className:"footer-container"},r.a.createElement(X.b.div,{initial:"hidden",animate:"show",transition:Object(d.a)({},{type:"spring",damping:10,stiffness:50},{delay:.6}),variants:{hidden:{opacity:0,y:50},show:{opacity:1,y:0}}},r.a.createElement(w.a,{className:"footer",display:"flex",padding:16,borderRadius:3,background:"tint2",justifyContent:"center"},r.a.createElement(A.a,{display:"flex",alignItems:"center"},"made with",r.a.createElement(X.b.span,{variants:o,animate:a?"animate":"stop",onHoverStart:function(){return i(!0)},onHoverEnd:function(){return i(!1)}},r.a.createElement(C.a,{marginX:4,size:14,icon:"heart",color:"#EC4C47"})),"by tru ^_^"))))}),le={SET_CURRENT_USER:"SET_CURRENT_USER"},de={SET_ALL_TODOS:"SET_ALL_TODOS"},ue=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).unsubscribeFromAuth=null,a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setCurrentUser,a=e.setAllTodos;this.unsubscribeFromAuth=_.onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}return e.next=3,z.collection("/users/".concat(n.uid,"/todos/"));case 3:return e.sent.onSnapshot((function(e){return a(e)})),e.next=7,I(n);case 7:e.sent.onSnapshot((function(e){t(Object(d.a)({id:e.id},e.data()))})),e.next=13;break;case 11:t(n),a(null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return r.a.createElement(g.a,{basename:"/todo-react-app"},r.a.createElement("div",{className:"app"},r.a.createElement(H,{className:"header"}),r.a.createElement("div",{className:"content"},r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/"},r.a.createElement(ce,null)))),r.a.createElement(se,{className:"footer"})))}}]),t}(r.a.Component),pe=Object(c.b)(null,(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:le.SET_CURRENT_USER,payload:e}}(t))},setAllTodos:function(t){return e(function(e){return{type:de.SET_ALL_TODOS,payload:e}}(t))}}}))(ue),me=a(32),fe=a(66),he=a.n(fe),be={currentUser:null},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le.SET_CURRENT_USER:return Object(d.a)({},e,{currentUser:t.payload});default:return e}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e.docs.map((function(e){return Object(d.a)({id:e.id},e.data())})).sort((function(e,t){return e.createdAt-t.createdAt})):[]},ve={todos:[]},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de.SET_ALL_TODOS:return Object(d.a)({},e,{todos:Ee(t.payload)});default:return e}},xe=Object(me.c)({user:ge,todo:ye}),Oe=[he.a],ke=Object(me.d)(xe,me.a.apply(void 0,Oe));o.a.render(r.a.createElement(c.a,{store:ke},r.a.createElement(pe,null)),document.getElementById("root"))},72:function(e,t,a){e.exports=a(169)},81:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.6e52c4d1.chunk.js.map