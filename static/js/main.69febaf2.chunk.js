(this["webpackJsonptodo-react-app"]=this["webpackJsonptodo-react-app"]||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),o=a.n(c),s=a(18),i=(a(75),a(15)),l=a.n(i),u=a(23),d=a(24),p=a(6),m=a(7),f=a(9),h=a(8),b=a(10),g=(a(77),a(59)),E=a(27),v=(a(78),a(169)),x=a(167),y=a(171),O=a(172),j=a(12),k=a(170),S=a(62),U=(a(79),function(e){var t=e.name,a=e.imageURL,n=Object(j.a)(e,["name","imageURL"]);return r.a.createElement(v.a,Object.assign({display:"flex",marginRight:8,marginLeft:8,alignItems:"center"},n),r.a.createElement(k.a,{src:a,name:t,size:32,marginRight:8}),r.a.createElement(S.a,{size:500},t))}),R=a(33),w=a.n(R);a(148),a(150);w.a.initializeApp({apiKey:"AIzaSyCkjxIEEQshEbM3GNrG5LMH2dqtuEgFLsM",authDomain:"todo-react-app-1c2b9.firebaseapp.com",databaseURL:"https://todo-react-app-1c2b9.firebaseio.com",projectId:"todo-react-app-1c2b9",storageBucket:"todo-react-app-1c2b9.appspot.com",messagingSenderId:"494569883453",appId:"1:494569883453:web:0bd3c0a828e36e45296754",measurementId:"G-FXZW0XVN8D"});var C=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var n,r,c,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=A.doc("/users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,c=t.email,o=t.photoURL,s=new Date,e.prev=9,e.next=12,n.set(Object(u.a)({displayName:r,email:c,photoURL:o,createdAt:s},a));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("error creating user: ".concat(e.t0.message));case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,a){return e.apply(this,arguments)}}(),N=w.a.auth(),A=w.a.firestore(),I=new w.a.auth.GoogleAuthProvider;I.setCustomParameters({prompt:"select_account"});var L=function(){return N.signInWithPopup(I)},T=(w.a,a(40)),_=Object(T.a)([function(e){return e.user}],(function(e){return e.currentUser})),D=Object(s.b)((function(e){return{currentUser:_(e)}}))((function(e){var t=e.currentUser;return r.a.createElement("div",{className:"header-container"},r.a.createElement(v.a,{className:"header",display:"flex",padding:16,borderRadius:3,background:"tint2"},r.a.createElement(v.a,{flex:1,display:"flex",alignItems:"center"},r.a.createElement(x.a,{size:600},"\u270f Todo")),r.a.createElement(v.a,{display:"flex"},t?r.a.createElement(v.a,{display:"flex"},r.a.createElement(U,{name:t.displayName,imageURL:t.photoURL}),r.a.createElement(y.a,{onClick:function(){return N.signOut()},appearance:"minimal",paddingX:8},r.a.createElement(O.a,{icon:"log-out",color:"muted"}))):r.a.createElement(y.a,{onClick:L,appearance:"primary"},r.a.createElement("span",null,"Sign In"),r.a.createElement(O.a,{icon:"log-in",marginLeft:10})))))})),z=(a(155),a(1)),X=(a(156),a(168)),B=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",createdAt:null,disabled:!1},a.handleChange=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({disabled:!0}),n=a.props.currentUser,e.prev=3,e.next=6,A.collection("/users/".concat(n.id,"/todos"));case 6:return r=e.sent,e.next=9,r.add({text:a.state.text,createdAt:new Date,starred:!1,completed:!1});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("couldn't save todo ".concat(e.t0.message));case 14:a.setState({text:"",disabled:!1});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return r.a.createElement("form",{className:"todo-form",onSubmit:this.handleSubmit},r.a.createElement(v.a,{display:"flex",margin:20,borderRadius:3,alignItems:"center",className:"todo-item",height:50},r.a.createElement(v.a,{flex:1,alignItems:"center",display:"flex",width:20,height:"100%"},r.a.createElement(X.a,{className:"text-input",name:"text",onChange:this.handleChange,placeholder:"Enter a new task",width:"100%",size:500,height:"100%",paddingX:12,required:!0,value:this.state.text,disabled:!e||this.state.disabled})),r.a.createElement(v.a,{height:"100%"},r.a.createElement(y.a,{className:"add-button",appearance:"minimal",height:"100%",paddingX:20,disabled:!e||this.state.disabled},r.a.createElement(S.a,{size:400},"Add")))))}}]),t}(r.a.Component),F=Object(s.b)((function(e){return{currentUser:_(e)}}))(B),M=(a(157),a(158),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={starred:!1,completed:!1},a.handleCompleted=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.currentUser,e.prev=1,r=!a.state.completed,e.next=5,A.doc("/users/".concat(n.id,"/todos/").concat(t)).update({completed:r});case 5:a.setState({completed:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to set todo as completed: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handleStarred=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.currentUser,e.prev=1,r=!a.state.starred,e.next=5,A.doc("/users/".concat(n.id,"/todos/").concat(t)).update({starred:r});case 5:a.setState({starred:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to set todo as starred: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.currentUser,e.prev=1,e.next=4,A.doc("/users/".concat(n.id,"/todos/").concat(t)).delete();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("failed to delete todo: ".concat(e.t0.message));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.completed,a=e.starred;this.setState({completed:t,starred:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.todoId,n=t.index,c=t.text,o=t.starred,s=t.completed;return r.a.createElement(v.a,{display:"flex",padding:6,borderRadius:3,alignItems:"center",className:"todo-item"},r.a.createElement(v.a,{flex:1,alignItems:"center",display:"flex",width:20,marginRight:6},r.a.createElement(S.a,{size:500,marginX:4},"".concat(n,".")),r.a.createElement(S.a,{size:500,marginX:4,overflow:"hidden",className:"todo-text ".concat(s?"strike-text":""),onClick:function(){return e.handleCompleted(a)},"data-completed":s},c)),r.a.createElement(v.a,null,r.a.createElement(y.a,{appearance:"minimal",marginRight:4,onClick:function(){return e.handleStarred(a)}},r.a.createElement(O.a,{icon:"star",color:"".concat(o?"#F7D154":"muted")})),r.a.createElement(y.a,{appearance:"minimal",onClick:function(){return e.handleDelete(a)}},r.a.createElement(O.a,{icon:"cross",color:"danger"}))))}}]),t}(r.a.Component)),G=Object(s.b)((function(e){return{currentUser:_(e)}}))(M),P=Object(T.a)([function(e){return e.todo}],(function(e){return e.todos})),W=Object(s.b)((function(e){return{todos:P(e)}}))((function(e){var t=e.todos;return r.a.createElement(v.a,{display:"flex",flexDirection:"column",borderRadius:3,background:"tint2",margin:20,className:"todo-container"},t.length?t.map((function(e,t){var a=e.id,n=e.text,c=e.starred,o=e.completed,s=Object(j.a)(e,["id","text","starred","completed"]);return r.a.createElement(G,Object.assign({key:a,todoId:a,text:n,index:t+1,starred:c,completed:o},s))})):r.a.createElement(v.a,{display:"flex",padding:16,borderRadius:3,alignItems:"center",justifyContent:"center"},r.a.createElement(x.a,{color:"#7B8B9A"},"Empty :(")))})),q=Object(s.b)((function(e){return{currentUser:_(e)}}))((function(e){var t=e.currentUser;return r.a.createElement("div",{className:"todo-page"},t?null:r.a.createElement(v.a,{display:"flex",padding:16,borderRadius:3,background:"tint2",margin:20,alignItems:"center"},r.a.createElement(x.a,{color:"#7B8B9A"},"Sign in and start adding tasks ^_^")),t?r.a.createElement(F,null):null,t?r.a.createElement(W,null):null)})),J=(a(159),function(){return r.a.createElement("div",{className:"footer-container"},r.a.createElement(v.a,{className:"footer",display:"flex",padding:16,borderRadius:3,background:"tint2",justifyContent:"center"},r.a.createElement(S.a,{display:"flex",alignItems:"center"},"made with ",r.a.createElement(O.a,{marginX:4,size:14,icon:"heart",color:"#EC4C47"})," by tru ^_^")))}),H={SET_CURRENT_USER:"SET_CURRENT_USER"},K={SET_ALL_TODOS:"SET_ALL_TODOS"},Q=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).unsubscribeFromAuth=null,a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setCurrentUser,a=e.setAllTodos;this.unsubscribeFromAuth=N.onAuthStateChanged(function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}return e.next=3,A.collection("/users/".concat(n.uid,"/todos/"));case 3:return e.sent.onSnapshot((function(e){return a(e)})),e.next=7,C(n);case 7:e.sent.onSnapshot((function(e){t(Object(u.a)({id:e.id},e.data()))})),e.next=13;break;case 11:t(n),a(null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(D,{className:"header"}),r.a.createElement("div",{className:"content"},r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/"},r.a.createElement(q,null)))),r.a.createElement(J,{className:"footer"})))}}]),t}(r.a.Component),V=Object(s.b)(null,(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:H.SET_CURRENT_USER,payload:e}}(t))},setAllTodos:function(t){return e(function(e){return{type:K.SET_ALL_TODOS,payload:e}}(t))}}}))(Q),Z=a(29),Y=a(61),$=a.n(Y),ee={currentUser:null},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.SET_CURRENT_USER:return Object(u.a)({},e,{currentUser:t.payload});default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())})).sort((function(e,t){return e.createdAt-t.createdAt})):[]},ne={todos:[]},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.SET_ALL_TODOS:return Object(u.a)({},e,{todos:ae(t.payload)});default:return e}},ce=Object(Z.c)({user:te,todo:re}),oe=[$.a],se=Object(Z.d)(ce,Z.a.apply(void 0,oe));o.a.render(r.a.createElement(s.a,{store:se},r.a.createElement(V,null)),document.getElementById("root"))},66:function(e,t,a){e.exports=a(161)},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.69febaf2.chunk.js.map