(this["webpackJsonptodo-react-app"]=this["webpackJsonptodo-react-app"]||[]).push([[0],{159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},165:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),c=n.n(o),i=n(19),s=(n(79),n(15)),l=n.n(s),u=n(26),d=n(25),p=n(6),m=n(7),f=n(5),h=n(8),g=n(9),b=(n(81),n(62)),E=n(29);n(82);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var y=r.a.createElement("title",null,"pencil"),k=r.a.createElement("g",{id:"pencil"},r.a.createElement("polygon",{points:"10.01 43.01 2 46 4.98 37.99 5 38 10 43 10.01 43.01",fill:"#2d346a"}),r.a.createElement("polygon",{points:"14.37 33.63 20.02 39.28 10.01 43.01 10 43 5 38 4.98 37.99 8.72 27.97 14.37 33.63",fill:"#fff"}),r.a.createElement("path",{d:"M41.11,18.19,20,39.28l-5.65-5.65L39,9l5.6,5.6a5.32,5.32,0,0,1-.59.68L41.12,18.2Z",fill:"#ffc12e"}),r.a.createElement("path",{d:"M29.81,6.89,32.74,4a5.4,5.4,0,0,1,.69-.59L39,9,14.37,33.63,8.72,28Z",fill:"#ffc12e"}),r.a.createElement("path",{d:"M46,10.41a6.84,6.84,0,0,1-1.36,4.16L39,9,33.43,3.36c2.85-2.16,7.17-1.72,10,1.16A8.39,8.39,0,0,1,46,10.41Z",fill:"#c3cce9"}),r.a.createElement("polyline",{points:"41.43 17.86 20.02 39.28 8.72 27.97 30.14 6.57",fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("path",{d:"M29.81,6.89,32.74,4c2.81-2.81,7.62-2.55,10.74.57h0c3.12,3.12,3.38,7.93.57,10.73L41.12,18.2",fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("polyline",{points:"20.02 39.28 2 46 8.72 27.97",fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("line",{x1:5,y1:38,x2:10,y2:43,fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("line",{x1:33.43,y1:3.36,x2:44.68,y2:14.61,fill:"none",stroke:"#2d346a",strokeLinejoin:"round",strokeWidth:2}),r.a.createElement("line",{x1:14.37,y1:33.63,x2:39.04,y2:8.97,fill:"none",stroke:"#2d346a",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),O=function(e){var t=e.svgRef,n=e.title,a=x(e,["svgRef","title"]);return r.a.createElement("svg",v({id:"icons",viewBox:"0 0 48 48",ref:t},a),void 0===n?y:n?r.a.createElement("title",null,n):null,k)},j=r.a.forwardRef((function(e,t){return r.a.createElement(O,v({svgRef:t},e))})),S=(n.p,n(182)),w=n(178),L=n(65),C=n(184),R=n(12),U=n(183),N=n(42),A=(n(83),function(e){var t=e.name,n=e.imageURL,a=Object(R.a)(e,["name","imageURL"]);return r.a.createElement(S.a,Object.assign({display:"flex",marginRight:8,marginLeft:8,alignItems:"center"},a),r.a.createElement(U.a,{src:n,name:t,size:32,marginRight:8}),r.a.createElement(N.a,{size:500},t))}),D=n(34),I=n.n(D);n(152),n(154);I.a.initializeApp({apiKey:"AIzaSyCkjxIEEQshEbM3GNrG5LMH2dqtuEgFLsM",authDomain:"todo-react-app-1c2b9.firebaseapp.com",databaseURL:"https://todo-react-app-1c2b9.firebaseio.com",projectId:"todo-react-app-1c2b9",storageBucket:"todo-react-app-1c2b9.appspot.com",messagingSenderId:"494569883453",appId:"1:494569883453:web:0bd3c0a828e36e45296754",measurementId:"G-FXZW0XVN8D"});var T=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=z.doc("/users/".concat(t.uid)),e.next=5,a.get();case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,o=t.email,c=t.photoURL,i=new Date,e.prev=9,e.next=12,a.set(Object(u.a)({displayName:r,email:o,photoURL:c,createdAt:i},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("error creating user: ".concat(e.t0.message));case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),_=I.a.auth(),z=I.a.firestore(),M=new I.a.auth.GoogleAuthProvider;M.setCustomParameters({prompt:"select_account"});var W=function(){return _.signInWithPopup(M)},X=(I.a,n(41)),B=Object(X.a)([function(e){return e.user}],(function(e){return e.currentUser})),F=Object(i.b)((function(e){return{currentUser:B(e)}}))((function(e){var t=e.currentUser;return r.a.createElement("div",{className:"header-container"},r.a.createElement(S.a,{className:"header",display:"flex",padding:16,borderRadius:3,background:"tint2"},r.a.createElement(S.a,{flex:1,display:"flex",alignItems:"center"},r.a.createElement(j,{className:"logo"}),r.a.createElement(w.a,{size:600}," Todo")),r.a.createElement(S.a,{display:"flex"},t?r.a.createElement(S.a,{display:"flex"},r.a.createElement(A,{name:t.displayName,imageURL:t.photoURL}),r.a.createElement(L.a,{onClick:function(){return _.signOut()},appearance:"minimal",paddingX:8},r.a.createElement(C.a,{icon:"log-out",color:"muted"}))):r.a.createElement(L.a,{onClick:W,appearance:"primary"},r.a.createElement("span",null,"Sign In"),r.a.createElement(C.a,{icon:"log-in",marginLeft:10})))))})),P=(n(159),n(2)),G=(n(160),n(179)),Z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",createdAt:null,disabled:!1},n.handleChange=function(e){n.setState(Object(P.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({disabled:!0}),a=n.props.currentUser,e.prev=3,e.next=6,z.collection("/users/".concat(a.id,"/todos"));case 6:return r=e.sent,e.next=9,r.add({text:n.state.text,createdAt:new Date,starred:!1,completed:!1});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("couldn't save todo ".concat(e.t0.message));case 14:n.setState({text:"",disabled:!1});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return r.a.createElement("form",{className:"todo-form",onSubmit:this.handleSubmit},r.a.createElement(S.a,{display:"flex",margin:20,borderRadius:3,alignItems:"center",className:"todo-item",height:50},r.a.createElement(S.a,{flex:1,alignItems:"center",display:"flex",width:20,height:"100%"},r.a.createElement(G.a,{className:"text-input",name:"text",onChange:this.handleChange,placeholder:"Enter a new task",width:"100%",size:500,height:"100%",paddingX:12,required:!0,value:this.state.text,disabled:!e||this.state.disabled})),r.a.createElement(S.a,{height:"100%"},r.a.createElement(L.a,{className:"add-button",appearance:"minimal",height:"100%",paddingX:20,disabled:!e||this.state.disabled},r.a.createElement(N.a,{size:400},"Add")))))}}]),t}(r.a.Component),q=Object(i.b)((function(e){return{currentUser:B(e)}}))(Z),J=(n(161),n(162),n(181)),H=n(180),K=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",starred:!1,completed:!1,isShown:!1,isLoading:!1,isShownDel:!1},n.handleCompleted=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.currentUser,e.prev=1,r=!n.state.completed,e.next=5,z.doc("/users/".concat(a.id,"/todos/").concat(t)).update({completed:r});case 5:n.setState({completed:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to set todo as completed: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),n.handleStarred=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.currentUser,e.prev=1,r=!n.state.starred,e.next=5,z.doc("/users/".concat(a.id,"/todos/").concat(t)).update({starred:r});case 5:n.setState({starred:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to set todo as starred: ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),n.handleDelete=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.currentUser,a&&a(),e.prev=2,e.next=5,z.doc("/users/".concat(r.id,"/todos/").concat(t)).delete();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("failed to delete todo: ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(P.a)({},e.target.name,e.target.value))},n.handleDialogConfirm=function(){var e=Object(d.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),r=n.props.currentUser,e.prev=2,e.next=5,z.doc("/users/".concat(r.id,"/todos/").concat(t)).update({text:n.state.text});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("failed to edit todo : ".concat(e.t0.message));case 10:a();case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.text,n=e.starred,a=e.completed;this.setState({text:t,starred:n,completed:a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.todoId,a=t.index,o=t.text,c=t.starred,i=t.completed;return r.a.createElement(S.a,{display:"flex",padding:6,borderRadius:3,alignItems:"center",className:"todo-item"},r.a.createElement(S.a,{flex:1,alignItems:"center",display:"flex",width:20,marginRight:6},r.a.createElement(N.a,{size:500,marginX:4},"".concat(a,".")),r.a.createElement(N.a,{size:500,marginX:4,overflow:"hidden",className:"todo-text ".concat(i?"strike-text":""),onClick:function(){return e.handleCompleted(n)},"data-completed":i},o)),r.a.createElement(S.a,null,r.a.createElement(L.a,{appearance:"minimal",marginRight:4,onClick:function(){return e.setState({isShown:!0})},padding:8},r.a.createElement(C.a,{icon:"edit",color:"selected"})),r.a.createElement(L.a,{appearance:"minimal",marginRight:4,padding:8,onClick:function(){return e.handleStarred(n)}},r.a.createElement(C.a,{icon:"star",color:"".concat(c?"#F7D154":"muted")})),r.a.createElement(L.a,{appearance:"minimal",padding:8,onClick:function(){return e.setState({isShownDel:!0})}},r.a.createElement(C.a,{icon:"cross",color:"danger"}))),r.a.createElement(J.a,{isShown:this.state.isShown,title:"Edit todo",onCloseComplete:function(){return e.setState({isShown:!1,isLoading:!1})},confirmLabel:this.state.isLoading?"Saving...":"Save",isConfirmLoading:this.state.isLoading,onConfirm:function(t){return e.handleDialogConfirm(n,t)},onCancel:function(){return e.setState({isShown:!1})}},r.a.createElement(H.a,{name:"text",placeholder:"Your todo...",value:this.state.text,onChange:this.handleChange,required:!0})),r.a.createElement(J.a,{isShown:this.state.isShownDel,title:"Delete todo",intent:"danger",onCloseComplete:function(){return e.setState({isShownDel:!1,isLoadingDel:!1})},confirmLabel:"Delete",onConfirm:function(t){return e.handleDelete(n,t)},onCancel:function(){return e.setState({isShownDel:!1})}},r.a.createElement(N.a,null,this.state.text)))}}]),t}(r.a.Component),Q=Object(i.b)((function(e){return{currentUser:B(e)}}))(K),V=Object(X.a)([function(e){return e.todo}],(function(e){return e.todos})),Y=Object(i.b)((function(e){return{todos:V(e)}}))((function(e){var t=e.todos;return r.a.createElement(S.a,{display:"flex",flexDirection:"column",borderRadius:3,background:"tint2",margin:20,className:"todo-container"},t.length?t.map((function(e,t){var n=e.id,a=e.text,o=e.starred,c=e.completed,i=Object(R.a)(e,["id","text","starred","completed"]);return r.a.createElement(Q,Object.assign({key:n,todoId:n,text:a,index:t+1,starred:o,completed:c},i))})):r.a.createElement(S.a,{display:"flex",padding:16,borderRadius:3,alignItems:"center",justifyContent:"center"},r.a.createElement(w.a,{color:"#7B8B9A"},"Empty :(")))})),$=Object(i.b)((function(e){return{currentUser:B(e)}}))((function(e){var t=e.currentUser;return r.a.createElement("div",{className:"todo-page"},t?null:r.a.createElement(S.a,{display:"flex",padding:16,borderRadius:3,background:"tint2",margin:20,alignItems:"center"},r.a.createElement(w.a,{color:"#7B8B9A"},"Sign in and start adding tasks ^_^")),t?r.a.createElement(q,null):null,t?r.a.createElement(Y,null):null)})),ee=(n(165),function(){return r.a.createElement("div",{className:"footer-container"},r.a.createElement(S.a,{className:"footer",display:"flex",padding:16,borderRadius:3,background:"tint2",justifyContent:"center"},r.a.createElement(N.a,{display:"flex",alignItems:"center"},"made with ",r.a.createElement(C.a,{marginX:4,size:14,icon:"heart",color:"#EC4C47"})," by tru ^_^")))}),te={SET_CURRENT_USER:"SET_CURRENT_USER"},ne={SET_ALL_TODOS:"SET_ALL_TODOS"},ae=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).unsubscribeFromAuth=null,n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setCurrentUser,n=e.setAllTodos;this.unsubscribeFromAuth=_.onAuthStateChanged(function(){var e=Object(d.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=11;break}return e.next=3,z.collection("/users/".concat(a.uid,"/todos/"));case 3:return e.sent.onSnapshot((function(e){return n(e)})),e.next=7,T(a);case 7:e.sent.onSnapshot((function(e){t(Object(u.a)({id:e.id},e.data()))})),e.next=13;break;case 11:t(a),n(null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return r.a.createElement(b.a,{basename:"/todo-react-app"},r.a.createElement("div",{className:"app"},r.a.createElement(F,{className:"header"}),r.a.createElement("div",{className:"content"},r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/"},r.a.createElement($,null)))),r.a.createElement(ee,{className:"footer"})))}}]),t}(r.a.Component),re=Object(i.b)(null,(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:te.SET_CURRENT_USER,payload:e}}(t))},setAllTodos:function(t){return e(function(e){return{type:ne.SET_ALL_TODOS,payload:e}}(t))}}}))(ae),oe=n(31),ce=n(64),ie=n.n(ce),se={currentUser:null},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.SET_CURRENT_USER:return Object(u.a)({},e,{currentUser:t.payload});default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())})).sort((function(e,t){return e.createdAt-t.createdAt})):[]},de={todos:[]},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne.SET_ALL_TODOS:return Object(u.a)({},e,{todos:ue(t.payload)});default:return e}},me=Object(oe.c)({user:le,todo:pe}),fe=[ie.a],he=Object(oe.d)(me,oe.a.apply(void 0,fe));c.a.render(r.a.createElement(i.a,{store:he},r.a.createElement(re,null)),document.getElementById("root"))},70:function(e,t,n){e.exports=n(167)},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){}},[[70,1,2]]]);
//# sourceMappingURL=main.3ce44912.chunk.js.map